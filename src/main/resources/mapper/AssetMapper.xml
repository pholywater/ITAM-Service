<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="hmm.itam.mapper.AssetMapper">
    <select id="getAssetList" resultType="hmm.itam.vo.AssetVo">
        SELECT *
        FROM asset_status

        LEFT JOIN hmm_member
        ON asset_status.status_member_id=hmm_member.member_id

        LEFT JOIN tgate_db
        ON hmm_member.member_id=tgate_db.tgate_member_id

        LEFT JOIN asset_information
        ON asset_status.status_asset_mumber=asset_information.asset_number

        LEFT JOIN asset_model
        ON asset_information.asset_model_name=asset_model.model_name

        LEFT JOIN orderby_rank
        ON hmm_member.member_rank=orderby_rank.member_rank

        LEFT JOIN orderby_asset
        ON asset_status.status_type=orderby_asset.asset_status


        order by
        orderby_asset.asset_grant,
        orderby_rank.member_grant,
        hmm_member.member_id,
        asset_status.status_asset_usage,
        tgate_db.tgate_member_department,
        asset_status.status_asset_usage DESC

    </select>



    <!--장비 추가 정보 추가 처리-->
    <insert id="insertAsset" parameterType="hmm.itam.vo.AssetVo">
        INSERT INTO Asset_information
        (asset_number, asset_model_name, asset_serial_number, asset_arrival_date)
        VALUES
        (#{asset_number}, #{asset_model_name}, #{asset_serial_number}, #{asset_arrival_date});
    </insert>

    <insert id="insertStatus" parameterType="hmm.itam.vo.AssetVo">
        INSERT INTO Asset_status
        (status_type, status_member_id, status_asset_status, status_asset_number)
        VALUES
        (#{status_type}, #{status_member_id}, #{status_asset_status}, #{asset_number});
    </insert>


    <select id="getAssetByNumber" resultType="hmm.itam.vo.UserVo">
        SELECT *
        FROM Asset_information
        WHERE asset_number = #{asset_number}
    </select>



</mapper>